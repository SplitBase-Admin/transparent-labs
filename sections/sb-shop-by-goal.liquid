{%  stylesheet %}
  .sb-shop-by-goal {
    background-color: var(--sb-bg-color, #F8F9FB);
    color: var(--sb-fg-color, #111314);
    padding: 48px 0 !important;
  }
  
  .sb-shop-by-goal__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
  }
  
  .sb-shop-by-goal__heading {
    font-family: var(--sb-font-family-heading);
    font-size: calc(28 / var(--sb-base-font-size, 16) * 1rem);
    line-height: 1.2;
    color: var(--sb-fg-color, #111314);
    margin: 0;
    max-width: 205px;
  }
  
  .sb-shop-by-goal__view-all {
    display: flex;
    align-items: center;
    gap: 10px;
    font-family: var(--sb-font-family-body);
    font-weight: 600;
    font-size: calc(16 / var(--sb-base-font-size, 16) * 1rem);
    line-height: 1;
    color: var(--sb-fg-color, #111314);
    text-decoration: none;
    border-bottom: 1px solid var(--sb-fg-color, #111314);
    padding-bottom: 4px;
    padding-top: 5px;
    white-space: nowrap;
  }
  
  .sb-shop-by-goal__view-all-icon {
    width: 18px;
    height: 18px;
    transform: rotate(90deg);
  }
  
  .sb-shop-by-goal__description {
    font-family: var(--sb-font-family-body);
    font-weight: 400;
    font-size: calc(16 / var(--sb-base-font-size, 16) * 1rem);
    line-height: 1.3;
    color: var(--sb-fg-color, #111314);
    opacity: 0.73;
    margin: 0 0 32px 0;
  }
  
  .sb-shop-by-goal__cta {
    margin-bottom: 32px;
  }

  .sb-shop-by-goal__cta .sb-button__link:hover{
    opacity: 0.73;
  }
  
  .sb-shop-by-goal__cards {
    display: flex;
    flex-direction: column;
    gap: 40px;
  }
  
  /* Pass custom properties to card components */
  .sb-shop-by-goal__cards .sb-goal-card {
    --sb-goal-card-fg: var(--sb-ch-fg-color, #111314);
    --sb-goal-card-bg: var(--sb-ch-bg-color, #FFFFFF);
  }
  
  @media screen and (min-width: 1024px) {
    .sb-shop-by-goal {
      padding: 88px 0 !important;
    }
    
    .sb-shop-by-goal__container {
      display: flex;
      justify-content: space-between;
      align-items: stretch;
      gap: 28px;
    }
    
    .sb-shop-by-goal__content-wrapper {
      width: 360px;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    
    .sb-shop-by-goal__content {
      flex-grow: 1;
    }
    
    .sb-shop-by-goal__header {
      margin-bottom: 16px;
      display: block; /* Remove flex on desktop since no View All link */
    }
    
    .sb-shop-by-goal__view-all {
      display: none; /* Hide on desktop */
    }
    
    .sb-shop-by-goal__heading {
      font-size: 40px;
      max-width: none;
    }
    
    .sb-shop-by-goal__description {
      font-size: 18px;
      line-height: 1.4;
      margin-bottom: 0;
    }
    
    .sb-shop-by-goal__cta {
      margin-bottom: 0;
      margin-top: auto;
    }
    
    .sb-shop-by-goal__cta .sb-button__link {
      display: inline-flex;
      width: 100%;
      padding: 14px 24px 16px;
      font-size: 16px;
    }
    
    .sb-shop-by-goal__cards {
      flex-direction: row;
      --column-count: 2;
      --inline-gap: 24px;
      --gap-count: calc(var(--column-count) - 1);
      gap: var(--inline-gap);
      flex-wrap: wrap;
      justify-content: center;
    }

    .sb-goal-card{
      width: calc((100% - var(--inline-gap, 12px) * var(--gap-count, 1)) / var(--column-count, 2));
    }
    
    /* Update card image height for desktop */
    .sb-shop-by-goal__cards .sb-goal-card__image {
      /* width: 400px; */
      height: auto;
    }
  }

  @media screen and (min-width: 1280px){
    .sb-shop-by-goal__container {
      gap: 64px;
    }
  }

  @media screen and (min-width: 1440px){
    .sb-shop-by-goal__container {
      gap: 84px;
    }

    .sb-shop-by-goal__cards{
      --inline-gap: 48px;
    }
  }

  @media screen and (min-width: 1920px){
    .sb-shop-by-goal__cards{
      --inline-gap: 48px;
    }
  }
{% endstylesheet %}
<div class="sb-shop-by-goal sb-styled-element" style="{%  render 'style-attributes', settings: section.settings, mobile_multiple: 0.55 %}">
  <div class="sb-page-width">
    <div class="sb-shop-by-goal__container">
      <div class="sb-shop-by-goal__content-wrapper">
        <div class="sb-shop-by-goal__content">
          <div class="sb-shop-by-goal__header">
            {% if section.settings.heading != blank %}
              <h2 class="sb-shop-by-goal__heading">{{ section.settings.heading }}</h2>
            {% endif %}
            {% if section.settings.link_text != blank and section.settings.link_url != blank %}
              <a class="sb-shop-by-goal__view-all" href="{{ section.settings.link_url }}">
                {{ section.settings.link_text }}
                {% render 'sb-icon--right-arrow' %}
              </a>
            {% endif %}
          </div>
          {% if section.settings.content != blank %}
            <p class="sb-shop-by-goal__description">
              {{ section.settings.content }}
            </p>
          {% endif %}
        </div>
        {% if section.settings.button_text != blank and section.settings.button_url != blank %}
          <div class="sb-shop-by-goal__cta">
            {% render 'sb-button', button: section.settings %}
          </div>
        {% endif %}
      </div>
      {% if section.blocks.size > 0 %}
        <div class="sb-shop-by-goal__cards">
          {% for block in section.blocks %}
            {% render 'goal-card', settings: block.settings %}
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% schema %}
{
  "name": "SB Shop By Goal",
  "settings": [
    {
      "type": "header",
      "content": "General"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "textarea",
      "id": "content",
      "label": "Content"
    },
    {
      "type": "header",
      "content": "CTA"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link Text"
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "Link URL"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Find My Supplement Routine"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "select",
      "id": "button_type",
      "label": "Button Style",
      "default": "outline",
      "options": [
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "outline",
          "label": "Outline"
        }
      ]
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "paragraph",
      "content": "Main Section Colors"
    },
    {
      "type": "color",
      "id": "fg_color",
      "label": "Color"
    },
    {
      "type": "color_background",
      "id": "bg_color",
      "label": "Background Color"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button Color"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color"
    },
    {
      "type": "paragraph",
      "content": "Card Colors"
    },
    {
      "type": "color",
      "id": "ch_fg_color",
      "label": "Color"
    },
    {
      "type": "color_background",
      "id": "ch_bg_color",
      "label": "Background Color"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding Top",
      "default": 0,
      "min": 0,
      "max": 100
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom",
      "default": 0,
      "min": 0,
      "max": 100
    }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "text",
          "id": "byline",
          "label": "Byline"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL"
        }
      ]
      
    },
  ],
  "presets": [
    {
      "name": "SB Shop By Goal"
    }
  ]
}
{% endschema %}
