{%  stylesheet %}
.sb-product-benefits__container {
  display: flex;
  flex-direction: column;
}

.sb-product-benefits__content {
  margin-bottom: 3.2rem;
  text-align: left;
  max-width: 500px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.sb-product-benefits__heading {
  font-size: 28px;
  line-height: 1.2;
  margin: 0;
  font-weight: 700;
  color: var(--sb-fg-color, #000);
}

.sb-product-benefits__subtitle {
  font-size: 16px;
  line-height: 1.3;
  color: var(--sb-fg-color, #000);
}

@media screen and (min-width: 768px) {
  .sb-product-benefits__subtitle {
    font-size: 18px;
  }
}

.sb-product-benefits__subtitle > * {
    margin: 0;
}

.sb-product-benefits__cards {
  display: flex;
  flex-direction: column;
  gap: 40px;
  width: 100%;
}

@media screen and (min-width: 768px) {
  .sb-product-benefits__content {
    margin-bottom: 0;
    gap: 16px;;
  }
  
  .sb-product-benefits__heading {
    font-size: 40px;
  }
  
  .sb-product-benefits__cards {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 48px;
  }
}
@media screen and (min-width: 1024px) {
  .sb-product-benefits__container {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 32px;
    align-items: start;
  }
  
}
{% endstylesheet %}

{% liquid
  assign blocks = section.blocks | map: 'settings'
  if section.settings.use_product_benefits == true and product.metafields.custom.product_benefit_blocks.value.count > 0
    assign blocks = product.metafields.custom.product_benefit_blocks.value
    assign should_render = true
  elsif section.settings.use_product_benefits == false and blocks.size > 0
    assign should_render = true  
  endif
%}

{% if should_render %}
  <div class="sb-product-benefits sb-styled-element" style="{%  render 'style-attributes', settings: section.settings, mobile_multiple: 0.55  %}">
    <div class="sb-page-width sb-product-benefits__container">
      <div class="sb-product-benefits__content">
        {% if section.settings.heading != blank %}
          <h2 class="sb-product-benefits__heading">{{ section.settings.heading }}</h2>
        {% endif %}

        {% if section.settings.content != blank %}
        <div class="sb-product-benefits__subtitle" {% if section.settings.fg_copy_color.alpha > 0 %} style="--sb-fg-color: {{ section.settings.fg_copy_color }};"{% endif %}>{{ section.settings.content }}</div>
        {% endif %}
      </div>
      
        <div class="sb-product-benefits__cards" {% if section.settings.ch_fg_copy_color.alpha > 0 %} style="--sb-copy-fg-color: {{ section.settings.ch_fg_copy_color }};"{% endif %}>
          {% for block in blocks %}
            {% render 'sb-benefits-card', settings: block %}
          {% endfor %}
        </div>
    </div>
  </div>
{% endif %}
{% schema %}
{
  "name": "SB Product Benefits",
  "settings": [
    {
      "type": "header",
      "content": "General"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content"
    },
    {
      "type": "checkbox",
      "id": "use_product_benefits",
      "label": "Use Product Benefits",
      "default": true,
      "info": "Enable this to Product Benefits of the Product. Will override blocks.",
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "paragraph",
      "content": "Main Section Colors"
    },
    {
      "type": "color",
      "id": "fg_color",
      "label": "Color"
    },
    {
      "type": "color",
      "id": "fg_copy_color",
      "label": "Copy custom color"
    },
    {
      "type": "color_background",
      "id": "bg_color",
      "label": "Background Color"
    },
    {
      "type": "paragraph",
      "content": "Card Colors"
    },
    {
      "type": "color",
      "id": "ch_fg_color",
      "label": "Color"
    },
    {
      "type": "color",
      "id": "ch_fg_copy_color",
      "label": "Copy custom color"
    },
    {
      "type": "color_background",
      "id": "ch_bg_color",
      "label": "Background Color"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding Top",
      "default": 0,
      "min": 0,
      "max": 100
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom",
      "default": 0,
      "min": 0,
      "max": 100
    }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Content"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
      
    },
  ],
  "presets": [
    {
      "name": "SB Product Benefits" 
    }
  ]
}
{% endschema %}
