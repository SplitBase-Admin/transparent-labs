<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>

{{ 'new-main-blog.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .new-main_blog {
    --header-background: {{ section.settings.header_background }};
    --main-heading-color: {{ section.settings.main_heading_color }};
    --main-subheading-color: {{ section.settings.main_subheading_color }};
  }
  
{%- endstyle -%}

<div class="new-main_blog">
  <div class="new-main_blog-header">
    <div class="container">
      <div class="new-main_blog-header_inner">
        {%- if section.settings.main_heading != blank -%}<h1 class="new-main_blog-header--heading">{{ section.settings.main_heading }}</h1>{%- endif -%}
        {%- if section.settings.main_subheading != blank -%}<p class="new-main_blog-header--subheading">{{ section.settings.main_subheading }}</p>{%- endif -%}
      </div>
    </div>
  </div>
  <div class="new-main_blog-features">
    <div class="container">
      <div class="new-main_blog-features--wrap">
        
        <div class="new-main_blog-features--slider">
          {%- if section.settings.features_title != blank -%}<h2 class="section_title">{{ section.settings.features_title }}</h2>{%- endif -%}
          <div class="main-blog-slider swiper">
            <div class="new-main_blog-features--slider-wrap swiper-wrapper">
              {%- for block in section.blocks -%}
                {%- assign featured_article = block.settings.featured_article -%}
                {%- assign url_parts = featured_article.url | split:'/' -%}
                {%- assign blog_handle = url_parts[2] -%}
                <div class="featured__article-card swiper-slide">
                  <a href="{{ featured_article.url }}" class="article-card-url" aria-label="article url"></a>
                  <div class="featured__article-card--image">
                    <img src="{{ featured_article.image | img_url: 'master' }}" alt="{{ featured_article.image.alt }}" width="{{ featured_article.image.width }}" height="{{ featured_article.image.height }}">
                  </div>
                  <div class="featured__article-card--info">
                    <div class="featured__article-card--info-wrap">
                      <span class="featured_article--category">{{ blogs[blog_handle].title }}</span>
                      <h3 class="featured_article--title">
                        <a href="{{ featured_article.url }}">
                          {{ featured_article.title }}
                        </a>
                      </h3>
                      <div class="featured_article--description">{{ featured_article.excerpt }}</div>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="23" viewBox="0 0 18 23" fill="none">
                      <g clip-path="url(#clip0_5948_5008)">
                        <path d="M-1.74846e-07 13.5532L16 13.5532M16 13.5532L11.75 17.5532M16 13.5532L11.75 9.55322" stroke="#111314" stroke-width="1.28571" stroke-linecap="round" stroke-linejoin="round"/>
                      </g>
                      <defs>
                        <clipPath id="clip0_5948_5008">
                          <rect width="22" height="18" fill="white" transform="translate(18 0.0532227) rotate(90)"/>
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
              {%- endfor -%} 
              </div>
                        <div class="multiple-blog-slider-bottom">
            <div class="multiple-blog-pagination"></div>
            <!-- Fractional Pagination (Slide Counter) -->
            <div class="multiple-blog-fraction slider-counter-fraction"></div>
          </div>
          </div>
        </div>
        <div class="new-main_blog-features--sidebar">
          {%- if section.settings.sidebar_title != blank -%}<h2 class="section_title">{{ section.settings.sidebar_title }}</h2>{%- endif -%}
            <div class="new-main_blog-features--sidebar-wrap">
              {% if section.settings.show_recent_articles %}
                {% for article in blog.articles limit: 3 %}
                    <div class="trending__article-card">
                      <a href="{{ article.url }}" class="artilce-card-url">Article Card URL</a>
                      <div class="trending__article-card--image">
                        <img src="{{ article.image | img_url: 'master' }}" alt="{{ article.image.alt }}" width="{{ article.image.width }}" height="{{ article.image.height }}">
                      </div>
                      <div class="trending__article-card--info">
                        <a href="{{ article.url }}"><h3 class="trending_article--title">{{ article.title }}</h3></a>
                        <div class="trending_article--description">{{ article.excerpt }}</div>
                        <p class="trending_article--author">By: {{ article.author }}</p>
                      </div>
                    </div>
                {% endfor %}
              {% else %}
                {% render 'static-blog-page-articles'  %}
              {% endif %}
            </div>
          {% render 'newsletter-form-mini', section:section %}
        </div>
      </div>
    </div>
  </div>
</div>


<script>
// Blog Fetured Article Slider: START
document.addEventListener('DOMContentLoaded', function () {

  document.querySelectorAll(".newsletter-form-close").forEach(function(closeBtn) {
    closeBtn.addEventListener("click", function() {
      document.querySelectorAll(".stay-informed-newsletter-form-mini").forEach(function(form) {
        form.style.display = "none";
      });
    });
  });

  
});
// Blog Fetured Article Slider: END

// Health & Fitness Calculators title match height: START
function equalizeTitleHeights() {
  const titles = document.querySelectorAll('.shop-by-goal.layout--full-width .block-header');
  if (window.innerWidth >= 992) {
    titles.forEach(el => el.style.height = 'auto');
  
    let maxHeight = 0;
    titles.forEach(el => {
      const height = el.offsetHeight;
      if (height > maxHeight) maxHeight = height;
    });
  
    titles.forEach(el => {
      el.style.height = maxHeight + 'px';
    });
  } else {
    titles.forEach(el => el.style.height = 'auto');
  }
}

window.addEventListener('load', equalizeTitleHeights);
window.addEventListener('resize', equalizeTitleHeights);
  
// Health & Fitness Calculators title match height: END

// Health & Fitness Calculators title match height: START
function equalizeSliderTitleHeights() {
  const titles = document.querySelectorAll('.new-main_blog-features--slider-wrap .featured_article--title');
  
    titles.forEach(el => el.style.height = 'auto');
  
    let maxHeight = 0;
    titles.forEach(el => {
      const height = el.offsetHeight;
      if (height > maxHeight) maxHeight = height;
    });
  
    titles.forEach(el => {
      el.style.height = maxHeight + 'px';
    });
  
}

window.addEventListener('load', equalizeSliderTitleHeights);
window.addEventListener('resize', equalizeSliderTitleHeights);
  
</script>

{% schema %}
  {
    "name": "New Main Blog",
    "settings": [
      {
        "type": "header",
        "content": "Blog Header"
      },
      {
        "type": "text",
        "id": "main_heading",
        "label": "Heading",
        "default": "The Formula"
      },
      {
        "type": "text",
        "id": "main_subheading",
        "label": "Sub heading",
        "default": "Your source of truth for health and fitness"
      },
      {
        "type": "color",
        "id": "header_background",
        "label": "Background color",
        "default": "#173446"
      },
      {
        "type": "color",
        "id": "main_heading_color",
        "label": "Heading color",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "id": "main_subheading_color",
        "label": "Sub heading color",
        "default": "#FFFFFF"
      },
      {
        "type": "header",
        "content": "Featured Articles"
      },
      {
        "type": "text",
        "id": "features_title",
        "label": "Title ",
        "default": "Formula Features"
      },
      {
        "type": "header",
        "content": "Trending Articles"
      },
      {
        "type": "checkbox",
        "id": "show_recent_articles",
        "label": "Show Recent Articles ",
        "default": true,
      },
      {
        "type": "text",
        "id": "sidebar_title",
        "label": "Title ",
        "default": "Whatâ€™s Trending"
      },
      {
        "type": "article",
        "id": "trending_article_1",
        "label": "Trending article 1"
      },
      {
        "type": "article",
        "id": "trending_article_2",
        "label": "Trending article 2"
      },
      {
        "type": "article",
        "id": "trending_article_3",
        "label": "Trending article 3"
      },
      {
        "type": "header",
        "content": "Newsletter Details"
      },
      {
        "type": "text",
        "id": "newsletter_heading",
        "label": "heading ",
        "default": "Stay Informed"
      },
      {
        "type": "text",
        "id": "newsletter_description",
        "label": "Description",
        "default": "Sign up for our weekly guide to better health."
      }
    ],
    "blocks": [
      {
        "type": "featured_article",
        "name": "Featured Article",
        "settings": [
          {
            "type": "article",
            "id": "featured_article",
            "label": "Featured Article"
          }
        ]
      }
    ],
    "presets":[
      {
          "name": "New Main Blog"
      }
    ]
  }
{% endschema %}