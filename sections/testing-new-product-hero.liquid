<style>
  
  button#add-to-cart-button:disabled {    cursor: not-allowed;}
  #price .line_thue {
    font-weight: 400;
    font-size: 16px;
    line-height: 16px;
    color: #6c787c;
    text-decoration: line-through;
    display: inline-flex;
    margin-left: 15px;
}
  p#price {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    flex-direction: row;
}
</style>
{%- liquid
  assign current_variant = product.selected_or_first_available_variant
  assign short_title = product.metafields.product_details.title
  assign subtitle = product.metafields.product_details.subtitle
-%}
{%  if product.selected_or_first_available_selling_plan_allocation != blank %}
{{ 'new-product-hero.css' | asset_url | stylesheet_tag }}
<div id="new-product-template" style="">
  <div class="new-product-grid flex flex-col-reverse xl:block">
    <div class="grid new-grid grid-cols-1 max-w-7xl pt-4 relative top-0 w-full xl:absolute xl:grid-cols-3 xl:h-full xl:left-1/2 xl:pt-16 xl:-translate-x-1/2">
      <div class="col-span-2"></div>

      <div class=" xl:top-4 xl:h-max right-dbox">
        <div class="bg-white">
          <div class="pt-6 xl:px-6">
            <h1 class="text-[40px] leading-[48px] md:text-5xl">
              {{ short_title }}
            </h1>
            <h2 class="mb-2 text-gray-500">
              {{ subtitle }}
            </h2>

            <div class="flex items-center text-sm">
              <div class="flex space-x-1 text-orange-400">
                {%- assign review_average = product.metafields.yotpo.reviews_average | times: 1 -%}
                {%- for i in (1..5) -%}
                  {%- assign index_minus_one = i | minus: 1 -%}
                  {%- assign mod = review_average | modulo: index_minus_one -%}

                  {%- if review_average >= i -%}
                    <svg class="h-4 w-4" version="1.1" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
                      <path d="m47.961 48h-47.945l39.914 31.543-15.941 48.441 40.059-29.871 39.938 29.871-15.871-48.863 39.918-31.121h-47.945l-16.094-47.996z" fill="currentColor"/>
                    </svg>
                  {%- elsif mod >= 0.5 -%}
                    <svg class="h-4 w-4" version="1.1" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
                      <path d="m128.02 48h-47.953l-16.094-48-16.031 48h-47.969l39.937 31.555-15.953 48.445 39.984-29.812 0.09375-0.0625 39.938 29.875-15.875-48.867zm-39.594 58.531-24.371-18.547-0.058594 0.0625v-56.953l10.164 24.906h29.812l-25.453 19.43z" fill="currentColor"/>
                    </svg>
                  {%- else -%}
                    <svg class="h-4 w-4" version="1.1" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
                      <path d="m64.008 31.113 10.172 24.887h29.809l-25.449 19.426 9.9023 31.105-24.387-18.543-24.387 18.109 9.8711-30.156-25.539-19.941h29.871l10.137-24.887m-16.043 16.887h-47.949l39.914 31.551-15.93 48.445 40.055-29.867 39.934 29.871-15.875-48.871 39.918-31.129h-47.945l-16.094-47.996z" fill="currentColor"/>
                    </svg>
                  {%- endif %}
                {%- endfor -%}
              </div>

              <p class="ml-3 text-gray-500">
                <span class="font-bold text-black">{{ product.metafields.yotpo.reviews_average }}</span>/5.0
              </p>
            </div>

            <div class="my-6 md:my-3">
              <p id="price" class="product-price font-bold text-xl md:text-2xl">{{ current_variant.price | money }}</p>
              <p class="compare-at-price text-sm text-gray-500">
                <s>{{ current_variant.compare_at_price | money }}</s>
              </p>
            </div>
          </div>
      
          <div class="bg-white pt-0 relative xl:relative">
             {% form 'product', product, data-productid: product.id %}

            <div class="p1_selling_plan"></div>
              
               <select class="hidden" name="id" data-productid="{{ product.id }}">
                      {% for variant in product.variants %}
                        <option
                          data-available="{{ variant.available }}"
                          data-option-1="{{ variant.option1 }}"
                          data-option-2="{{ variant.option2 }}"
                          data-price="{{ variant.price }}"
                          {% if current_variant.id == variant.id %}selected{% endif %}
                          value="{{ variant.id }}"
                        >
                          {{ variant.title }}
                        </option>
                      {% endfor %}
                    </select> 
               
            <input type="hidden" name="id" id="product-select_{{product.id}}" class="stack_vid" value="{{ product.selected_or_first_available_variant.id }}" />
            <input type="hidden" name="sp" id="selected_selling_plan" class="" value="" />

            <div class="stack-row xt-stack-row">
               <div class="stack-row-item">
               {% if product.options[0] %}
                      {% assign used = '' %}
                    <div class="take_price_ss"  style="display:block;">
                      <div class="input-wraper ">
                        <label for="select-one1_{{product.id}}">{{ product.options[0] }}</label>
                        <select data-option-position="1" id='select-one1_{{ product.id}}' dataval="{{ product.variants.first.id }}" onchange="lletsDoThis_{{ product.id}}()">
                          {% for variant in product.variants %}
                          {% unless variant.metafields.secomapp.freegifts %}
                          {% unless variant.title contains '(Freegifts)' %}

                          {% unless used contains variant.option1 %}
                            {% if product.selected_or_first_available_variant.id == variant.id %}
                                <option value="{{ variant.option1 }}" selected>{{ variant.option1 }}</option>
                              {% else %}
                                <option value="{{ variant.option1 }}">{{ variant.option1 }}</option>
                              {% endif %}
                          {% capture used %}{{ used }} {{ variant.option1 }}{% endcapture %}
                          {% endunless %}

                          {%endunless%}
                          {%endunless%}
                          {% endfor %}
                        </select>
                      </div>
                    {% endif %}

                    {% if product.options[1] %}
                      <div class="input-wraper">
                        {% assign used = '' %}
                        <label for="select-two2_{{ product.id}}">{{ product.options[1] }}</label>
                        <select data-option-position="2" id='select-two2_{{ product.id}}' dataval="{{ product.variants.first.id }}"  onchange="lletsDoThis_{{ product.id}}()">
                          {% for variant in product.variants %}
                            {% unless variant.metafields.secomapp.freegifts %}
                              {% unless variant.title contains '(Freegifts)' %}
                                {% unless used contains variant.option2 %}
                                  {% if product.selected_or_first_available_variant.id == variant.id %}
                                    <option value="{{ variant.option2 }}" selected>{{ variant.option2 }}</option>
                                    {% else %}
                                    <option value="{{ variant.option2 }}">{{ variant.option2 }}</option>
                                    {% endif %}
                                  {% capture used %}{{ used }} {{ variant.option2 }}{% endcapture %}
                                {% endunless %}
                              {%endunless%}
                            {%endunless%}
                          {% endfor %}
                        </select>
                      </div>
                    {% endif %}

                    {% if product.options[2] %}
                      <div class="input-wraper">
                        {% assign used = '' %}
                        <label for="select-three3_{{product.id}}">{{ product.options[2] }}</label>
                        <select data-option-position="3" id='select-three3_{{product.id}}' dataval="{{ product.variants.first.id }}"  onchange="lletsDoThis_{{product.id}}()">
                          {% for variant in product.variants %}
                          {% unless variant.metafields.secomapp.freegifts %}
                          {% unless variant.title contains '(Freegifts)' %}

                          {% unless used contains variant.option3 %}
                            {% if product.selected_or_first_available_variant.id == variant.id %}
                              <option value="{{ variant.option3 }}" selected>{{ variant.option3 }}</option>
                              {% else %}
                              <option value="{{ variant.option3 }}">{{ variant.option3 }}</option>
                              {% endif %}
                          {% capture used %}{{ used }} {{ variant.option3 }}{% endcapture %}
                          {% endunless %}

                          {%endunless%}
                          {%endunless%}
                          {% endfor %}
                          </select>
                      </div>
                    {% endif %}
                  </div>
               </div>
               <div class="stack-row-item active_class">
                    <input type="radio" id="onetime" data-text="One-Time Purchase" class="stack-radio-2" name="newpurchaseoption" value="onetime" checked> 
                    <label for="onetime" class="stack-100">
                      {% if section.settings.onetimetext %}
                         {{ section.settings.onetimetext }} 
                      {% endif %}
                       <br> 
                       {% if section.settings.onetimesubtext %}
                         <small>{{ section.settings.onetimesubtext}}</small>
                       {% endif %}
               
                     </label>
                    <span class="pass_otp take_price onetimeprice"></span>

                    
                    </div>

                  <div class="stack-row-item">
                     <input type="radio" id="subsave" data-text="Deliver Every Month" class="stack-radio ddoption1" name="newpurchaseoption" value="subsave" >
                       <label for="subsave" class="stack-100">
                       {% if section.settings.subscribetext %}    
                         {{ section.settings.subscribetext }}
                       {% endif %}
                       </label>
                    <span class="sub_price take_price sub_price1"></span>


                  <div class="xtags">
                      {% if section.settings.sdetail != blank %}
                        <span>{{section.settings.sdetail}}</span>
                      {% endif %}
                      {% if section.settings.sdetail != blank %}
                        <span>{{section.settings.sdetail1}}</span>
                      {% endif %}
                      {% if section.settings.sdetail != blank %}
                        <span>{{section.settings.sdetail2}}</span>
                      {% endif %}
                    </div>

                      {% if section.settings.slistinformation != blank %}
                        <ul class="xstacklist">
                            {{section.settings.slistinformation}}
                          </ul>
                      {% endif %}
             
                    <div class="take_price_sss take_price_ss"  style="display:none;">
                      <div class="input-wraper">
                        <label class="rc-selling-plans__label visually-hidden" for="selling_plan_{{ product.id }}">Ship Every</label>
                        <select id="selling_plan_{{ product.id }}" class="rc_widget__option__plans__dropdown rc-selling-plans__dropdown" >
                            
                        </select>
                      </div>
               
                      </div>
                  </div>
              </div>
            
               


              <div class="flex items-center quant-btn">
                <div class="mr-4 md:mr-8">
                  <quantity-input>
                    <div class="flex items-center text-blue-500">
                      <button
                        class="bg-gray-300 flex h-10 items-center justify-center rounded-full text-blue-light w-10"
                        type="button"
                      >
                        {% render 'icon-minus' %}
                      </button>

                      <input
                        class="border-2 border-gray-300 bg-transparent hide-selectors outline-none mx-2 rounded text-center w-16 focus:ring-0"
                        min="1"
                        name="quantity"
                        type="number"
                        value="1"
                      />

                      <button
                        class="bg-gray-300 flex h-10 items-center justify-center rounded-full text-blue-light w-10"
                        type="button"
                      >
                        {% render 'icon-plus' %}
                      </button>
                    </div>
                  </quantity-input>
                </div>

                <div class="w-full" id="add-to-cart-button-container">
                  <button
                    class="bg-blue-light font-bold py-2 rounded text-white w-full {% unless current_variant.available %}opacity-70{% endunless %}"
                    id="add-to-cart-button"
                    type="button"
                  >
                    <span id="product-availability"{{ current_variant.available }}>{% if current_variant.available %}Subscribe{% else %}Sold Out{% endif %}</span>
                  </button>
                </div>
              </div>
               </div>
            {% endform %}
          </div>
             <a  id="hideme" class="klaviyo-bis-trigger" href="#">Notify Me When Available</a>
        </div>

  
    </div>

    <div class="lg:py-8 xl:bg-gray-300 xl:py-16">
      <div class="max-w-7xl mx-auto xl:px-4">
        <div class="gap-8 grid grid-cols-1 xl:grid-cols-3">
          <div class="relative xl:col-span-2">
            <div class="grid grid-flow-col auto-cols-[minmax(0,_auto)]">
              <div class="hidden max-h-max w-36 xl:block">
                <div class="swiper" id="product-thumbnails" style="max-height: 677px">
                  <div class="swiper-wrapper">
                    <div class="swiper-slide 65">
                      {%- for variant in product.variants -%}
                        {%- if variant.image -%}
                          <div class="{% unless variant.id == current_variant.id %}hidden{% endunless %}" data-variant="{{ variant.id }}">
                            <div class="bg-white h-36 object-contain pb-4 pt-2 w-36">
                              {%- render 'lazy-image',
                                image: variant.image,
                                image_class: 'h-36 object-contain pb-4 pt-2',
                                width: 240,
                              -%}
                            </div>
                          </div>
                        {%- endif -%}
                      {%- endfor -%}
                    </div>

                    {% for image in product.images %}
                      
                      {% if image.alt contains 'sfp - ' or image.attached_to_variant? %}
                        {% continue %}
                      {% endif %}
                      

                      <div class="swiper-slide 89">
                        <div class="h-36 object-contain w-36">
                          {%- render 'lazy-image',
                            image: image,
                            image_class: 'h-36 object-contain',
                            width: 240,
                          -%}
                        </div>
                      </div>
                    {% endfor %}
                  </div>

                  <div class="swiper-prev absolute bg-white left-1/2 p-1 rounded-md text-blue-400 -translate-x-1/2 transition-opacity top-4 z-10 hover:opacity-70">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
                    </svg>
                  </div>

                  <div class="swiper-next absolute bg-white bottom-4 left-1/2 p-1 rounded-md text-blue-400 -translate-x-1/2 transition-opacity z-10 hover:opacity-70">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                    </svg>
                  </div>
                </div>
              </div>

              <div>
                {% comment %}<span class="max-h-[300px] lg:max-h-[600px]"></span>{% endcomment %}
                <div class="bg-gray-300 swiper xl:bg-none" id="product-images">
                  <div class="swiper-wrapper 45">
                  {% if product.has_only_default_variant %}
                  {% else %}
                    <div class="swiper-slide bg-white pl-2 85">
                     
                      {%- for variant in product.variants -%}
                        {%- if variant.image -%}
                          <div class="bg-gray-300 {% unless variant.id == current_variant.id %}hidden{% endunless %}" data-variant="{{ variant.id }}">
                            {%- render 'lazy-image',
                              height: 600
                              image: variant.image,
                              image_class: 'max-h-[300px] object-contain p-4 lg:max-h-[600px]',
                              width: 800
                            -%}
                          </div>
                        {%- endif -%}
                      {%- endfor -%}
                    </div>
{% endif %}
                    
  
                    {% for image in product.images %}
                     
                      {% if image.alt contains 'sfp - ' or image.attached_to_variant? %}
                        {% continue %}
                      {% endif %}

                      <div class="457 swiper-slide bg-white pl-2" data-image-size={{ product.images.size }}>
                        {%- render 'lazy-image',
                          height: 600
                          image: image,
                          image_class: 'max-h-[300px] object-contain lg:max-h-[600px]',
                          width: 800
                        -%}
                      </div>
                    {% endfor %}
            
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
  var variant_values = {{ product.variants | json }};
  var len = variant_values.length;
  for(var i = 0; i < len; i++)
  {
    var len2 = variant_values[i].selling_plan_allocations.length;
    var plans = variant_values[i].selling_plan_allocations;
    for(var j=0; j < len2; j++)
    {
      if(i==0){
      if(j == 0)
      {
        $("#selling_plan_{{ product.id }}").append('<option value="selling_plan_00">30 days</option>'); 
      }
      if(j == 1)
      {
        $("#selling_plan_{{ product.id }}").append('<option value="selling_plan_11">45 days</option>'); 
      }
      if(j == 2)
      {
        $("#selling_plan_{{ product.id }}").append('<option value="selling_plan_22">60 days</option>'); 
      }
      if(j == 3)
      {
        $("#selling_plan_{{ product.id }}").append('<option value="selling_plan_33">75 days</option>'); 
      }
      if(j == 4)
      {
        $("#selling_plan_{{ product.id }}").append('<option value="selling_plan_44">90 days</option>'); 
      }}
      $(".p1_selling_plan").append('<input type=hidden data-stack="'+variant_values[i].id+'" data-price='+ Shopify.formatMoney(plans[j].price) +' data-otp= '+ Shopify.formatMoney(plans[j].compare_at_price)+'  class="selling_plan_'+j+j+'" name="selling_plan" value="'+plans[j].selling_plan_id+'">');
      
    }
    // if(i == 0)
    // {
    //    break;
    // }
  }
</script>
<script>
  function lletsDoThis_{{product.id}}()
  {
    
      var val = $("input[name='newpurchaseoption']:checked").val();
      {% if product.options[0] %}
        var opt1 = $("#select-one1_{{ product.id}}").val();
      {% endif %}
      {% if product.options[1] %}
        var opt2 = $("#select-two2_{{ product.id}}").val();
      {% endif %}
      {% if product.options[2] %}
        var opt3 = $("#select-three3_{{ product.id}}").val();
      {% endif %}
  

  var id = '';
  {% for v in product.variants %}
    {% unless v.metafields.secomapp.freegifts %}
      {% unless v.title contains '(Freegifts)' %}
        if(opt1=="{{ v.option1 }}"{% if product.options[1] %} && opt2=="{{ v.option2 }}"{% endif %}{% if product.options[2] %} && opt3=="{{ v.option3 }}"{% endif %}) 
        {
          var id = {{ v.id }};
          var price = "{{ v.price | money }}";
          var condition = "{{ v.available }}";
          var com_at_price = "{{ product.price }}";
        }
     {%endunless%}
   {%endunless%}
 {% endfor %}

   if(condition == 'true') 
  {
      document.getElementById('product-select_{{product.id}}').value = id;
      var selling_plan_val = $("input[name='newpurchaseoption']:checked").val();
      $(".p1_selling_plan [data-stack]").each(function(i,Data)
      {
          var vid = parseInt($(Data).data("stack"));
          if(vid == id)
          {
              var otpprice = $(Data).data("otp");
              var new_price = $(Data).data("price");
              $('.onetimeprice').text(otpprice);
              $('#price').text(otpprice);
              $(".sub_price").html(new_price+"<br><span class='line_thue'>"+otpprice+"</span>");  
          }
      });
  }  
  else if(condition == 'false')
  {
      document.getElementById('product-select_{{product.id}}').value = '';
      var selling_plan_val = $("input[name='newpurchaseoption']:checked").val();
      $(".p1_selling_plan [data-stack]").each(function(i,Data)
      {
        var vid = parseInt($(Data).data("stack"));
        if(vid == id)
        {
            var otpprice = $(Data).data("otp");
            var new_price = $(Data).data("price");
            $('.onetimeprice').text(otpprice);
            $('#price').text(otpprice);
            $(".sub_price").html(new_price+"<br><span class='line_thue'>"+otpprice+"</span>");  
        }
      });
        
        $("#product-availability").text("Sold Out"); 
        $("#add-to-cart-button").addClass("opacity-70"); 
        $("#add-to-cart-button").prop('disabled', true);  
        setTimeout(showbackinstock, 1000);
  }
  else 
  {
      document.getElementById('product-select_{{product.id}}').value = "000";
      $("#product-availability").text("Unavailable"); 
      $("#add-to-cart-button").addClass("opacity-70"); 
      $("#add-to-cart-button").prop('disabled', true);
  }
}
</script>

<script>
  function showbackinstock() 
  {
    $("#hideme").show();
  }
  $(document).ready(function()
  {
  var idd = $("#product-select_{{ product.id }}").val();
  
  document.querySelectorAll('div[data-variant-sfp]').forEach((elem) => {
    if (elem.dataset.variantSfp == idd) 
    {
      elem.classList.remove('hidden');
    } 
    else 
    {
      elem.classList.add('hidden');
    }
  });
     
  document.querySelectorAll('#product-images div[data-variant]').forEach((elem) => {
    if (elem.dataset.variant == idd) 
    {
      elem.classList.remove('hidden');
    } 
    else 
    {
      elem.classList.add('hidden');
    }
  });
  
             
  var selling_plan_val = $("input[name='newpurchaseoption']:checked").val();
    if(selling_plan_val == "onetime")
    {
      var current_variant_id =  $("input[name='id']").val();
      // $("#product-availability").text("Add to Cart"); 
      $(".p1_selling_plan [data-stack]").each(function(i,Data){
        var vid = parseInt($(Data).data("stack"));
          
          if(vid == current_variant_id)
          {
            var otpprice = $(Data).data("otp");
            var new_price = $(Data).data("price");
            $('#price').text(otpprice);
            $(".sub_price").html(new_price+"<br><span class='line_thue'>"+otpprice+"</span>");  
            $(".onetimeprice").text(otpprice);
          }
      });
    }
    else
    {
      var current_variant_id =  $("input[name='id']").val();
      $(".p1_selling_plan [data-stack]").each(function(i,Data)
      {
          var vid = parseInt($(Data).data("stack"));
          if(vid == current_variant_id)
          {
            var otpprice = $(Data).data("otp");
            var new_price = $(Data).data("price");
            $('#price').text(otpprice);
            $(".sub_price").html(new_price+"<br><span class='line_thue'>"+otpprice+"</span>");  
          }
      });
    }

    $('#selling_plan_{{product.id}}').change(function() 
    {
      var selected_plan_val = $('#selling_plan_{{product.id}}').val();
      var selling_plan_val = $("input[name='newpurchaseoption']:checked").val();
      if(selling_plan_val == "subsave")
      {
        var total  = 0;
        var otptotal  = 0;
        if(selected_plan_val == "selling_plan_00")
        {
          var selling_plan = parseInt($(".selling_plan_00").val());
          $("#selected_selling_plan").val(selling_plan);
        }
        if(selected_plan_val == "selling_plan_11")
        {
          var selling_plan = parseInt($(".selling_plan_11").val());
          $("#selected_selling_plan").val(selling_plan);
        }
        if( selected_plan_val == "selling_plan_22")
        {
          var selling_plan = parseInt($(".selling_plan_22").val());
          $("#selected_selling_plan").val(selling_plan);
        }
        if( selected_plan_val == "selling_plan_33")
        {
          var selling_plan = parseInt($(".selling_plan_33").val());
          $("#selected_selling_plan").val(selling_plan);
        }
        if( selected_plan_val == "selling_plan_44")
        {
          var selling_plan = parseInt($(".selling_plan_44").val());
          $("#selected_selling_plan").val(selling_plan);
        }
      }
      else
      {
      
      }
    });


      $('input[type=radio][name=newpurchaseoption]').change(function() 
      {
        $(".take_price_sss").hide('slow');
        $(this).siblings (".take_price_sss").show('slow');
        
        
        var selling_plan_val = $("input[name='newpurchaseoption']:checked").val();
        if(selling_plan_val == "onetime")
        {
          var current_variant_id =  $("input[name='id']").val();
            // $("#product-availability").text("Add to Cart"); 
           $(".p1_selling_plan [data-stack]").each(function(i,Data){
            var vid = parseInt($(Data).data("stack"));
            
            if(vid == current_variant_id)
            {
              var otpprice = $(Data).data("otp");
              var new_price = $(Data).data("price");
              $('#price').text(otpprice);
              $(".onetimeprice").text(otpprice);
              $(".sub_price").html(new_price+"<br><span class='line_thue'>"+otpprice+"</span>");  
            }
          });
          document.querySelector('select[name="id"]', 'input[name="id"]').dispatchEvent(new Event('change'));
        }
        else
        {
          
          var current_variant_id =  $("input[name='id']").val();
          $(".p1_selling_plan [data-stack]").each(function(i,Data)
          {
            var vid = parseInt($(Data).data("stack"));
            if(vid == current_variant_id)
            {
              var otpprice = $(Data).data("otp");
              var new_price = $(Data).data("price");
              $('#price').text(otpprice);
              $(".sub_price").html(new_price+"<br><span class='line_thue'>"+otpprice+"</span>");  
            }
          });
          document.querySelector('select[name="id"]', 'input[name="id"]').dispatchEvent(new Event('change'));
        }
      });

      $("#add-to-cart-button").on("click", function ()
      {
          var selling_plan_val= "";
          var items = [];
          var selected_plan_val = $('#selling_plan_{{product.id}}').val();
          var selling_plan_val = $("input[name='newpurchaseoption']:checked").val();
          if(selling_plan_val == "subsave")
          {
              var total  = 0;
              var otptotal  = 0;
              if(selected_plan_val == "selling_plan_00")
              {
                  var data = { id: parseInt($('.stack_vid').val()), quantity:$("input[name='quantity']").val(), selling_plan: parseInt($('.'+selected_plan_val).val()) }
              }
              else if(selected_plan_val == "selling_plan_11")
              {
                  var data = {id: parseInt($('.stack_vid').val()), quantity:$("input[name='quantity']").val(), selling_plan: parseInt($('.'+selected_plan_val).val()) }
              }

              else if( selected_plan_val == "selling_plan_22")
              {
                  var data = {id: parseInt($('.stack_vid').val()), quantity:$("input[name='quantity']").val(), selling_plan: parseInt($('.'+selected_plan_val).val()) }
              }
            
              else if( selected_plan_val == "selling_plan_33")
              {
                  var data = {id: parseInt($('.stack_vid').val()), quantity:$("input[name='quantity']").val(), selling_plan: parseInt($('.'+selected_plan_val).val()) }
              }
            
              else if( selected_plan_val == "selling_plan_44")
              {
                  var data = {id: parseInt($('.stack_vid').val()), quantity:$("input[name='quantity']").val(), selling_plan: parseInt($('.'+selected_plan_val).val()) }
              }

              // call ajax 
              jQuery.ajax({
              type: 'POST',
              url: '/cart/add.js',
              data: data,
              dataType: 'json',
              success: function(response) 
              { 
                  openCartMenu();
              }
          });
      }
      else
      {
          var data = {id: parseInt($('.stack_vid').val()), quantity:$("input[name='quantity']").val() }
          console.log("Called!",data);
          jQuery.ajax({
              type: 'POST',
              url: '/cart/add.js',
              data: data,
              dataType: 'json',
              success: function(response) 
              {
                  openCartMenu();
              }
          });
      }
  });
  });

  </script>

</div>


{% endif %}




{% raw %}
<script id="benefits-template" type="text/x-handlebars-template">
  <div class="benefits-swiper swiper">
    <div class="swiper-wrapper">
      {{#each items}}
        <div class="swiper-slide">
          <div class="font-bold mb-4 text-blue-500 text-lg md:text-2xl">
            {{{header}}}
          </div>

          <div class="text-gray-500 text-sm sm:text-base">
            {{{description}}}
          </div>
        </div>
      {{/each}}
  
    </div>

    <div class="flex items-center mt-4">
      <div class="flex-1">
        <div class="benefits-swiper__pagination"></div>
      </div>

      <div class="gap-2 grid grid-cols-2">
        <div class="benefits-swiper__button-prev bg-white flex h-8 items-center justify-center rounded-full text-orange-500 transition-opacity w-8 hover:opacity-70">
          {% endraw %}{% render 'icon-chevron-left' %}{% raw %}
        </div>

        <div class="benefits-swiper__button-next bg-white flex h-8 items-center justify-center rounded-full text-orange-500 transition-opacity w-8 hover:opacity-70">
          {% endraw %}{% render 'icon-chevron-right' %}{% raw %}
        </div>
      </div>
    </div>
  </div>
</script>
{% endraw %}

{% raw %}
<script id="ingredients-template" type="text/x-handlebars-template">
  {{#each items}}
  <div class="ingredients-element">
    <custom-accordion>
      <div class="bg-white rounded-xl text-blue-500">
        <button
          aria-controls="ingredient-acc-{{index}}"
          class="border-2 border-transparent flex items-center justify-between p-4 rounded-xl text-left transition-all w-full hover:border-blue-400 hover:opacity-70 md:p-6"
          type="button"
        >
          <span class="text-sm sm:text-base">{{{title}}}</span>
          {{#unless emptyDescription}}
          {% endraw %}
          <div class="plus-icon text-blue-400 transition-transform">
            {% render 'icon-plus' %}
          </div>
          {% raw %}
          {{/unless}}
        </button>

        <div
          aria-labelled-by="ingredient-acc-{{index}}"
          class="max-h-0 overflow-hidden text-sm"
          role="region"
        >
          <div class="p-6 rich-text">
            {{{description}}}
          </div>
        </div>
      </div>
    </custom-accordion>
  </div>
  {{/each}}
</script>
{% endraw %}

{% raw %}
<script id="faq-template" type="text/x-handlebars-template">
  {{#each items}}
  <div>
    <custom-accordion>
      <div class="bg-white rounded-xl text-blue-500">
        <button
          aria-controls="faq-{{index}}"
          class="border-2 border-transparent flex items-center justify-between p-4 rounded-xl text-left transition-all w-full hover:border-blue-400 hover:opacity-70"
          type="button"
        >
          <div class="flex items-center">
            <div class="bg-orange-400 bg-opacity-20 font-semibold py-2 rounded-md text-center text-orange-400 w-8">
              Q.
            </div>
            <div class="flex-1 mx-3 text-sm sm:text-base">{{{header}}}</div>
          </div>
          {% endraw %}
          <div class="plus-icon text-blue-400 transition-transform">
            {% render 'icon-plus' %}
          </div>
          {% raw %}
        </button>

        <div
          aria-labelled-by="faq-{{index}}"
          class="max-h-0 overflow-hidden text-sm"
          role="region"
        >
          <div class="p-4">
            <div class="flex h-full">
              <div class="bg-blue-400 bg-opacity-20 font-semibold mr-3 py-2 rounded-md text-blue-400 text-center w-8">
                A.
              </div>

              <div class="flex-1 font-semibold">
                {{{description}}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </custom-accordion>
  </div>
  {{/each}}
</script>
{% endraw %}

<style>
  :root {
    --swiper-navigation-size: 24px;
    --swiper-theme-color: #41B5E8;
  }

  .yotpo .promoted-products-box {
    display: none !important;
  }

  @media screen and (max-width: 640px) {
    footer {
      padding-bottom: 64px;
    }
  }
</style>

<script type="text/javascript">
  const productHandle = '{{ product.handle }},';

  function getCookie(cookieName) {
    const name = `${cookieName}=`;
    const decodedCookie = decodeURIComponent(document.cookie);
    const ca = decodedCookie.split(';');

    for(let i = 0; i < ca.length; i += 1) {
      let c = ca[i];

      while (c.charAt(0) === ' ') {
        c = c.substring(1);
      }

      if (c.indexOf(name) === 0) {
        return c.substring(name.length, c.length);
      }
    }

    return '';
  }

  function setCookie(name, value, exp) {
    const d = new Date();

    d.setTime(d.getTime() + (exp * 24 * 60 * 60 * 1000));

    const expires = `expires=${d.toUTCString()}`;

    document.cookie = `${name}=${value};${expires};path=/`;
  }

  const existingCookie = getCookie('tl_recent_products');

  if (existingCookie.length === 0) {
    setCookie('tl_recent_products', productHandle, 14);
  } else if (existingCookie.indexOf(productHandle) === -1) {
    setCookie('tl_recent_products', existingCookie.concat(productHandle), 14);
  }
</script>

{%- liquid
  if product.selected_or_first_available_variant.featured_media
    assign seo_media = product.selected_or_first_available_variant.featured_media
  else
    assign seo_media = product.featured_media
  endif
-%}

<script src="https://widget.sezzle.com/v1/javascript/price-widget?uuid=61cf6d6f-dd10-47e6-a89e-f995f579159c" defer></script>
<script type="application/ld+json">
  {
    "@context": "http://schema.org/",
    "@type": "Product",
    "name": {{ product.title | json }},
    "url": {{ shop.url | append: product.url | json }},
    {% if seo_media -%}
      {%- assign media_size = seo_media.preview_image.width | append: 'x' -%}
      "image": [
        {{ seo_media | img_url: media_size | prepend: "https:" | json }}
      ],
    {%- endif %}
    "description": {{ product.description | strip_html | json }},
    {% if product.selected_or_first_available_variant.sku != blank -%}
      "sku": {{ product.selected_or_first_available_variant.sku | json }},
    {%- endif %}
    "brand": {
      "@type": "Thing",
      "name": {{ product.vendor | json }}
    },
    "offers": [
      {%- for variant in product.variants -%}
        {
          "@type" : "Offer",
          {%- if variant.sku != blank -%}
            "sku": {{ variant.sku | json }},
          {%- endif -%}
          "availability" : "http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
          "price" : {{ variant.price | divided_by: 100.00 | json }},
          "priceCurrency" : {{ cart.currency.iso_code | json }},
          "url" : {{ shop.url | append: variant.url | json }}
        }{% unless forloop.last %},{% endunless %}
      {%- endfor -%}
    ]
  }
</script>


{% schema %}
{
  "name": "New hero Product",
  "settings": [
      {
      	"type":"text",
      	"id":"sdetail",
      	"label":"Badge 1",
		"default":"NEW!"
      },
      {
      	"type":"text",
      	"id":"sdetail1",
      	"label":"Badge 2",
		"default":"15% off"
      },
      {
      	"type":"text",
      	"id":"sdetail2",
      	"label":"Badge 3",
		"default":"Free Shipping"
      },
      {
      	"type":"textarea",
      	"id":"slistinformation",
      	"label":"information"
      },{
    	"type":"text",
        "id":"title",
        "label":"Section Title"
	},
    {
    	"type":"textarea",
        "id":"subtitle",
        "label":"Section Subtitle"
	},
	{
    	"type":"text",
        "id":"onetimetext",
        "label":"One time purchase text",
		"default":"One-Time Purchase"
	},
	{
    	"type":"text",
        "id":"onetimesubtext",
        "label":"One time purchase sub text",
		"default":"Give it a try"
	},
	{
    	"type":"text",
        "id":"subscribetext",
        "label":"Subscribe and Save text",
		"default":"Subscribe & Save"
	}
],
	"presets":[
		{
			"name": "New hero Product"
		}
	]
}
{% endschema %}

