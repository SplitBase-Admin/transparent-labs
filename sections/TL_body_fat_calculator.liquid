{{ 'multiple-calculators.css' | asset_url | stylesheet_tag }}
<div class="main">
  <div class="xgen-inner">
    <div class="cal-header">
      {% if section.settings.header_image != blank %}
        <img src="{{section.settings.header_image | img_url: 'master'}}" alt="section.settings.header_image">
      {% endif %}

      {% if section.settings.title != blank %}
        <h3 style>{{ section.settings.title }}</h3>
      {% endif %}

      {% if section.settings.detail != blank %}
        <p>{{ section.settings.detail }}</p>
      {% endif %}

      <button style="display:none;" class="showmeasure">How to Measure Yourself for Body Fat Testing</button>
      <p class="measure" style="display:none;">
        You will need a tape measure to assess the circumference of your waist, hips, and neck. After measuring, enter
        your respective results (in inches or centimeters) in the body fat calculator above to determine your body fat
        percentage.
      </p>
    </div>

    <form
      id="email_signup"
      class="tlc-form klaviyo_styling klaviyo_gdpr_embed_XVaZVT"
      action="//manage.kmail-lists.com/subscriptions/subscribe"
      data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe"
      method="GET"
      target="_blank"
    >
      <input type="hidden" name="calculator-name" value="bfat">
      <input type="hidden" name="g" value="XVaZVT">
      <input type="hidden" name="$fields" value="$consent">
      <input type="hidden" name="$list_fields" value="$consent" X>

      <div class="form-group gender">
        <label class="main-label">GENDER</label>
         <input type="radio" class="fgender" name="fgender" value="female" id="female">
        <label for="female" class="label2">{% render 'xicon-femail' %} Female</label> 
        <input type="radio" name="fgender" class="fgender" value="male" checked="" id="male">
        <label for="male" class="label2">{% render 'xicon-mail' %} Male</label>
        
      </div>

      <div style="color:red;font-size:10px;" class="Height_msg"></div>
      <div class="form-group cominput">
        <label for="fHeight" class="main-label">Height<super>*</super></label>
        <div class="input-group">
          <input
            type="number"
            id="fHeight"
            name="Height"
            class="form-control"
            placeholder=""
            aria-label="Height"
            aria-describedby="basic-addon2"
            required=""
            min="0"
          >
          <input type="radio" name="height-unit" value="in"  id="heightin"
          ><label for="heightin" class="label2">in</label>
          <input type="radio" name="height-unit" value="cm" checked id="heightcm"
          ><label for="heightcm" class="label2">cm</label>
        </div>
      </div>

      <div style="color:red;font-size:10px;" class="waist_msg"></div>
      <div class="form-group cominput">
        <label for="fWaist" class="main-label">Waist Measurement<super>*</super></label>
        <div class="input-group">
          <input
            type="number"
            id="fWaist"
            name="Waist"
            class="form-control"
            placeholder=""
            aria-label="Waist"
            aria-describedby="basic-addon2"
            required=""
            min="0"
          >
          <input type="radio" name="waist-unit" value="in"  id="waistin"
          ><label for="waistin" class="label2">in</label> <input type="radio" name="waist-unit" value="cm" checked id="waistcm"
          ><label for="waistcm" class="label2">cm</label>
        </div>
      </div>

      <div style="color:red;font-size:10px;" class="Neck_msg"></div>
      <div class="form-group cominput">
        <label for="fNeck" class="main-label">Neck Measurement<super>*</super></label>
        <div class="input-group">
          <input
            type="number"
            id="fNeck"
            name="Neck"
            class="form-control"
            placeholder=""
            aria-label="Neck"
            aria-describedby="basic-addon2"
            required=""
            min="0"
          >
          <input type="radio" name="neck-unit" value="in"  id="neckin"
          ><label for="neckin" class="label2">in</label> <input type="radio" name="neck-unit" value="cm" checked id="neckcm"
          ><label for="neckcm" class="label2">cm</label>
        </div>
      </div>

      <div style="color:red;font-size:10px;" class="fHip_msg"></div>
      <div class="form-group cominput" id="hip-wrapper" style="display:none;">
        <!-- add hideshow class to make this option available for womens -->
        <label for="fHip" class="main-label">Hip Measurement<super>*</super></label>
        <div class="input-group">
          <input
            type="number"
            id="fHip"
            name="Hip"
            class="form-control"
            placeholder=""
            aria-label="Hip"
            aria-describedby="basic-addon2"
            required=""
            min="0"
          >
          <input type="radio" name="hip-unit" value="in"  id="hipin"
          ><label for="hipin" class="label2">in</label> <input type="radio" name="hip-unit" value="cm" checked id="hipcm"
          ><label for="hipcm" class="label2">cm</label>
        </div>
      </div>

      <div style="color:red;font-size:10px;" class="email_msg"></div>
      <div class="form-group email">
        <label for="email" class="main-label">Email Address<super>*</super></label>
        <div class="input-group">
          <input type="text" name="email" placeholder="name@example.com" id="email">
        </div>
      </div>

      <div class="form-group agree">
        <div class="input-group">
          <input type="checkbox" name="term1" value="yes" id="chkboxone"
          ><label for="chkboxone" class="label2"
            >I understand that the results provided by this calculator are estimations based on scientific and clinical
            data and are not intended to replace advice from a qualified healthcare professional. Always consult with a
            physician or dietitian before starting a new diet or exercise program.</label
          >
        </div>
      </div>
      <div class="form-group agree">
        <div class="input-group">
          <input type="checkbox" name="term2" value="yes" id="chkboxtwo" checked
          ><label for="chkboxtwo" class="label2"
            >Transparent Labs can occationally send me product recommendations and promotional emails.</label
          >
        </div>
      </div>

      <div class="form-group">
        <button type="button" class="bmrbtn" id="calculateBodyFat" disabled>Calculate</button>
      </div>
    </form>

    <div class="tlresult">
      <div id="bodyFatRes"></div>
      <div id="bodyFatRes2"></div>
    </div>
  </div>

 
            
  <div class="max-w-6xl mx-auto px-4 text-blue-500 bmr-resourse-detail">
    <div class="rich-text py-8 space-y-4">
      {% if section.settings.resources_heading != blank %}
        <h2 class="">{{ section.settings.resources_heading }}</h2>
      {% endif %}
      {% if section.settings.resources_detail != blank %}
        <p class="">{{ section.settings.resources_detail }}</p>
      {% endif %}
      {% if section.settings.references_heading != blank %}
        <h2 class="">{{ section.settings.references_heading }}</h2>
      {% endif %}
      {% if section.settings.references_detail != blank %}
        <p class="">{{ section.settings.references_detail }}</p>
      {% endif %}
    </div>
  </div>
   <div class="tlresult-bodyfat" style="display:none;">
    <div class="max-w-7xl mx-auto">
  
  <div class="xheading bodyfat">
    <h2 class="fat_percenteage">Your estimated body fat is considered [descriptor provided by chart below] for your age and biological sex</h2>
    <!--<p>Essential body fat level for an average person like you should have <span class="fat_percenteage">x-x%</span> of body fat.</p> -->
    </div>
    
    <ul class="bodyfat-graph">
   		<li class="xathletic"><span id="xathletic_inn">1%</span></li>
      	<li class="xgreen"><span id="xgreen_inn">4%</span></li>
      	<li class="xsedentary"><span id="xsedentary_inn">7%</span></li>
      	<li class="xlight"><span id="xlight_inn">15%</span></li>
      	<li class="xmoderate"><span id="xmoderate_inn">20%</span></li>
      	<li class="xhigh"><span id="xhigh_inn">28%</span></li>
    </ul>
    
    <div class="xavge">
      <span>Too Low</span>
      
      <span>Obese</span>
    </div>
    
    <div class="xavge1">
      <p><span class="bfatoutput1">5%</span> <br>Your Body Fat Percent</p>
      <!-- <p><span class="bfatoutput2">3kg</span> <br>Total Body Fat weight</p> -->
    </div>
    
    <div class="out-wraper">
      	<div class="xreslist " style="background-color: #efefef;padding: 0;">
          <h3 class="body-fat-chart"> 
            IDEAL BODY FAT PERCENTAGE CHART
            <br>
            (American Council on Exercise)</h3>
      	</div>
      	<div class="xreslist" style="background-color: #efefef;">
          <span class="xname" style="padding:0 5px;">Description</span> 
          <span class="xcount" style="padding:0 5px;">Men</span>
          <span class="xcount" style="padding:0 5px;">Women</span>
        </div>  
      	<div class="xreslist">
          <i class="xathletic"></i> 
          <span class="xname">Critically low</span> 
          <span class="xcount"><2%</span>
          <span class="xcount"><10%</span>
        </div>

        <div class="xreslist">
          <i class="xgreen"></i> 
          <span class="xname">Ultra-lean</span> 
          <span class="xcount">2-5%</span>
          <span class="xcount">10-13%</span>
        </div>

        <div class="xreslist">
          <i class="xsedentary"></i> 
          <span class="xname">Very lean</span> 
          <span class="xcount">6-13%</span>
          <span class="xcount">14-20%</span>
        </div>
      
      	<div class="xreslist">
          <i class="xlight"></i> 
          <span class="xname">Fairly Lean</span> 
          <span class="xcount">14-17%</span>
          <span class="xcount">21-24%</span>
        </div>
      
      	<div class="xreslist">
          <i class="xmoderate"></i> 
          <span class="xname">Average</span> 
          <span class="xcount">18-24%</span>
          <span class="xcount">25-31%</span>
        </div>
      
      	<div class="xreslist">
          <i class="xhigh"></i> 
          <span class="xname">Obese</span> 
          <span class="xcount">25%+</span>
          <span class="xcount">32%+</span>
        </div>

      </div>
      
    </div>
  </div>
  <div class="flex xgen-new-collection" id="xgen-new-collection">
    <div class="flex-1">
       <div id="bfat-output" style="display:none;">
            <div class="xgen-tagging">
              {% if block.settings.heading != blank %}<h2 class="user_goal">{{block.settings.heading}}</h2>{% endif %}
              {% if block.settings.detail != blank %}<p class="goal_subtitle">{{block.settings.detail}}</p>{% endif %}
            </div>
            <div  class="gap-8 grid grid-cols-1 mb-8 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-3 3xl:grid-cols-3" id="bfat-output-one"  style="display:none;">
              {% assign product_list = 'preseries-bulk-preworkout,proteinseries-mass-gainer,stim-free-fat-burner' | split: ',' %}  
              {% for product_handle in product_list  %}{% assign product =  all_products[product_handle ]%}{% render 'single_product_grid' with product: product %}{% endfor %}
            </div>
            <div  class="gap-8 grid grid-cols-1 mb-8 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-3 3xl:grid-cols-3" id="bfat-output-two" style="display:none;">
              {% assign product_list = 'preseries-lean-pre-workout,proteinseries-100-grass-fed-whey-protein-isolate,stim-free-fat-burner' | split: ',' %}  
              {% for product_handle in product_list  %}{% assign product =  all_products[product_handle ]%}{% render 'single_product_grid' with product: product %}{% endfor %}
            </div>
            <div  class="gap-8 grid grid-cols-1 mb-8 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-3 3xl:grid-cols-3" id="bfat-output-three" style="display:none;">
              {% assign product_list = 'proteinseries-collagen-hydrolysate,preseries-stim-free-preworkout,fat-burner' | split: ',' %}  
              {% for product_handle in product_list  %}{% assign product =  all_products[product_handle ]%}{% render 'single_product_grid' with product: product %}{% endfor %}
            </div>
        </div>
    </div>
  </div>

  <style>
    super{
      color:red;
    }
  </style>

<script type="text/javascript" src="//www.klaviyo.com/media/js/public/klaviyo_subscribe.js"></script>

<script>
    $(document).ready(function()
	{
  		$("#chkboxone").change("click", function () 
		{
			if (this.checked)
            {
              	$(".bmrbtn").attr('disabled', false);
            }
            if (!this.checked)
            {
              	$(".bmrbtn").attr('disabled', true);
            }
  		});
	});
  
   KlaviyoSubscribe.attachToForms('#email_signup', {
     success: function ($form) {
       console.log($form);
       var formdata = $("#email_signup").serialize();
       console.log("https://www.transparentlabs.com/pages/calculator-results?"+formdata);
       window.location.href = "https://www.transparentlabs.com/pages/calculator-results?"+formdata;
       // `$form` is a jQuery wrapper around the form that was submitted. This makes it easy to get the email address or form fields.
       var email = $form.find('[name="email"]').val();
       _learnq.push(['identify', { $email: email }]);
       _learnq.push(['track', 'Signed Up for Newsletter']);
     },
     hide_form_on_success: true,
     extra_properties: {
       $source: '$embed',
       $method_type: "Klaviyo Form",
       $method_id: 'embed',
       $consent_version: 'Embed default text'
     }
   });
   
  $(document).ready(function()
  {

    // Enable/Disable BMR button based on checkbox state
    $("#chkboxone").change(function () {
      $("#calculateBodyFat").attr('disabled', !this.checked);
    });

    //hip show and hide
    $("input[name='fgender']").on('change', function () {
      if( $(this).is(":checked") ){ 
        var radioval = $(this).val();
        if(radioval=='female')
        {
          $('#hip-wrapper').show();
          $(".fHip_msg").text("");
        }
        else
        {
          $('#hip-wrapper').hide();
          $(".fHip_msg").text("");
        }
      }//if closed
    });
    
    // Validate height on change
    $("#fHeight").on('change', function () {
      var height = parseFloat($(this).val());
      if (isNaN(height) || height <= 0) {
        $(".Height_msg").text("Please enter a valid height greater than 0!");
        $("#calculateBodyFat").attr('disabled', true);
      } else {
        $(".Height_msg").text("");
        checkAllFields();
      }
    });

    // Validate waist on change
    $("#fWaist").on('change', function () {
      var fWaist = parseFloat($(this).val());
      if (isNaN(fWaist) || fWaist <= 0) {
        $(".waist_msg").text("Please enter a valid waist greater than 0!");
        $("#calculateBodyFat").attr('disabled', true);
      } else {
        $(".waist_msg").text("");
        checkAllFields();
      }
    });

    // Validate neck on change
    $("#fNeck").on('change', function () {
      var fNeck = parseFloat($(this).val());
      if (isNaN(fNeck) || fNeck <= 0) {
        $(".Neck_msg").text("Please enter a valid neck greater than 0!");
        $("#calculateBodyFat").attr('disabled', true);
      } else {
        $(".Neck_msg").text("");
        checkAllFields();
      }
    });

    // Validate hip on change
    $("#fHip").on('change', function () {
      var fHip = parseFloat($(this).val());
      if (isNaN(fHip) || fHip <= 0) {
        $(".fHip_msg").text("Please enter a valid hip greater than 0!");
        $("#calculateBodyFat").attr('disabled', true);
      } else {
        $(".fHip_msg").text("");
        checkAllFields();
      }
    });

    // Validate email on change
    $("#email").on('change', function () 
    {
      var email = $(this).val();
      var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/; 
      var email_ex = regex.test(email);
  
      if (!email_ex) {
        $(".email_msg").text("Please enter a valid email!");
        $("#calculateBodyFat").attr('disabled', true);
      } else {
        $(".email_msg").text("");
        checkAllFields();
      }
    });

  function checkAllFields() 
  {
    var gender = $("input[name='fgender']:checked").val();
    var height = parseFloat($("#fHeight").val());
    var waist = parseFloat($("#fWaist").val());
    var neck = parseFloat($("#fNeck").val());
    var email = $("#email").val();

    var emailRegex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    var isEmailValid = emailRegex.test(email);

    if(gender=='male')
    {
      // Enable the BMR button only if all fields are valid and the checkbox is checked
      if (
        !isNaN(height) && height > 0 &&
        !isNaN(waist) && waist > 0 &&
        !isNaN(neck) && neck > 0 &&
        isEmailValid &&
        $("#chkboxone").is(':checked')
      ) 
      {
        $("#calculateBodyFat").attr('disabled', false);
      } 
      else 
      {
        $("#calculateBodyFat").attr('disabled', true);
      }
    }
    else
    {
      var hip = parseFloat($("#fHip").val());
      // Enable the BMR button only if all fields are valid and the checkbox is checked
      if (
        !isNaN(height) && height > 0 &&
        !isNaN(waist) && waist > 0 &&
        !isNaN(hip) && hip > 0 &&
        !isNaN(neck) && neck > 0 &&
        isEmailValid &&
        $("#chkboxone").is(':checked')
      ) 
      {
        $("#calculateBodyFat").attr('disabled', false);
      } 
      else 
      {
        $("#calculateBodyFat").attr('disabled', true);
      }  
    }//else closed
    
  }//function closed

  $("#calculateBodyFat").click(function (event) 
  {
    event.preventDefault();
    var gender = $("input[name='fgender']:checked").val();
    
    if($("#heightin").is(':checked'))
    {
      var height = parseFloat($("#fHeight").val()) * 2.54; // Convert to cm
    }
    else
    {
      var height = parseFloat($("#fHeight").val());
    }
    
    if($("#waistin").is(':checked'))
    {
      var waist = parseFloat($("#fWaist").val()) * 2.54; // Convert to cm
    }
    else
    {
      var waist = parseFloat($("#fWaist").val());
    }
    
    if($("#neckin").is(':checked'))
    {
      var neck = parseFloat($("#fNeck").val()) * 2.54; // Convert to cm
    }
    else
    {
      var neck = parseFloat($("#fNeck").val());
    }

    var checkallFiedls = 'yes';
    //this is check all validation
      if (isNaN(height) || height <= 0) {
        $(".Height_msg").text("Please enter a valid height greater than 0!");
        checkallFiedls = 'no';
      }
      if (isNaN(waist) || waist <= 0) {
        $(".waist_msg").text("Please enter a valid waist greater than 0!");
        checkallFiedls = 'no';
      }
      if (isNaN(neck) || neck <= 0) {
        $(".Neck_msg").text("Please enter a valid neck greater than 0!");
        checkallFiedls = 'no';
      }

      if (gender === "female") {
        if($("#hipin").is(':checked'))
        {
          var hip = parseFloat($("#fHip").val()) * 2.54; // Convert to cm
        }
        else
        {
          var hip = parseFloat($("#fHip").val());
        }
        if (isNaN(hip) || hip <= 0) {
          $(".fHip_msg").text("Please enter a valid hip greater than 0!");
          checkallFiedls = 'no';
        }
      }//if closed
    
      var email2 = $("#email").val();
      var regex2 = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/; 
      var email_ex2 = regex2.test(email2);
  
      if (!email_ex2) {
        $(".email_msg").text("Please enter a valid email!");
        checkallFiedls = 'no';
      }

    if(checkallFiedls == 'no')
    {
      $("#calculateBodyFat").attr('disabled', true);
      return false;
    }
    
    if (!gender) {
      alert("Please select your gender!");
      return;
    }

    var bodyFatPercentage;
        
    if (gender === "male") {
        var waist_neck = waist - neck;
        bodyFatPercentage = (86.010 * Math.log10(waist_neck)) - (70.041 * Math.log10(height)) + 36.76;
    
        if (bodyFatPercentage < 0) 
        {
          bodyFatPercentage = 0;
          $('.bfatoutput1').text(`${bodyFatPercentage.toFixed(2)}%`);
          // Reset all categories
            const categories = ['#xathletic_inn', '#xgreen_inn', '#xsedentary_inn', '#xlight_inn', '#xmoderate_inn', '#xhigh_inn'];
            categories.forEach(category => $(category).removeClass('active').text(''));
    
            // Activate the appropriate category
            if (bodyFatPercentage < 2) {
                $('#xathletic_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 5) {
                $('#xgreen_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 13) {
                $('#xsedentary_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 17) {
                $('#xlight_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 24) {
                $('#xmoderate_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else {
                $('#xhigh_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            }
    
            $(".tlresult-bodyfat").show('slideDown');
            $('#bfat-output').show('slideDown');
            $(".tlresult").text(`Your body fat percentage is ${bodyFatPercentage.toFixed(2)}%.`);
            const resultsSection = document.querySelector(".tlresult-bodyfat");
            const headerOffset = 100; // Adjust this value to match your header's height
            const elementPosition = resultsSection.getBoundingClientRect().top + window.scrollY;
            const offsetPosition = elementPosition - headerOffset;
            
            window.scrollTo({
              top: offsetPosition,
              behavior: "smooth"
            });
    
            // Display specific results
            if (bodyFatPercentage < 14) {
                $('#bfat-output-one').show();
            } else if (bodyFatPercentage >= 14 && bodyFatPercentage < 18) {
                $('#bfat-output-two').show();
            } else if (bodyFatPercentage >= 18) {
                $('#bfat-output-three').show();
            }
         
        } 
        else 
        {
            $('.bfatoutput1').text(`${bodyFatPercentage.toFixed(2)}%`);
            // Reset all categories
            const categories = ['#xathletic_inn', '#xgreen_inn', '#xsedentary_inn', '#xlight_inn', '#xmoderate_inn', '#xhigh_inn'];
            categories.forEach(category => $(category).removeClass('active').text(''));
    
            // Activate the appropriate category
            if (bodyFatPercentage < 2) {
                $('#xathletic_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 5) {
                $('#xgreen_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 13) {
                $('#xsedentary_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 17) {
                $('#xlight_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 24) {
                $('#xmoderate_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else {
                $('#xhigh_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            }
    
            $(".tlresult-bodyfat").show('slideDown');
            $('#bfat-output').show('slideDown');
            $(".tlresult").text(`Your body fat percentage is ${bodyFatPercentage.toFixed(2)}%.`);
            const resultsSection = document.querySelector(".tlresult-bodyfat");
            const headerOffset = 100; // Adjust this value to match your header's height
            const elementPosition = resultsSection.getBoundingClientRect().top + window.scrollY;
            const offsetPosition = elementPosition - headerOffset;
            
            window.scrollTo({
              top: offsetPosition,
              behavior: "smooth"
            });
    
            // Display specific results
            if (bodyFatPercentage < 14) {
                $('#bfat-output-one').show();
            } else if (bodyFatPercentage >= 14 && bodyFatPercentage < 18) {
                $('#bfat-output-two').show();
            } else if (bodyFatPercentage >= 18) {
                $('#bfat-output-three').show();
            }
        }//else closed
    } 
    else //FEMALE
    {
        var waist_hip = waist + hip;
        var waist_hip_neck = waist_hip - neck;
      
        bodyFatPercentage = (163.205 * Math.log10(waist_hip_neck)) - (97.684 * Math.log10(height)) - 78.387;
    
        if (bodyFatPercentage < 0) {
            bodyFatPercentage = 0;
            $('.bfatoutput1').text(`${bodyFatPercentage.toFixed(2)}%`);
            // Reset all categories
            const categories = ['#xathletic_inn', '#xgreen_inn', '#xsedentary_inn', '#xlight_inn', '#xmoderate_inn', '#xhigh_inn'];
            categories.forEach(category => $(category).removeClass('active').text(''));
    
            // Activate the appropriate category
            if (bodyFatPercentage < 2) {
                $('#xathletic_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 5) {
                $('#xgreen_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 13) {
                $('#xsedentary_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 17) {
                $('#xlight_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 24) {
                $('#xmoderate_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else {
                $('#xhigh_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            }
    
            $(".tlresult-bodyfat").show('slideDown');
            $('#bfat-output').show('slideDown');
            $(".tlresult").text(`Your body fat percentage is ${bodyFatPercentage.toFixed(2)}%.`);
            const resultsSection = document.querySelector(".tlresult-bodyfat");
            const headerOffset = 100; // Adjust this value to match your header's height
            const elementPosition = resultsSection.getBoundingClientRect().top + window.scrollY;
            const offsetPosition = elementPosition - headerOffset;
            
            window.scrollTo({
              top: offsetPosition,
              behavior: "smooth"
            });
    
            // Display specific results
            if (bodyFatPercentage < 21) {
                $('#bfat-output-one').show();
            } else if (bodyFatPercentage >= 21 && bodyFatPercentage < 25) {
                $('#bfat-output-two').show();
            } else if (bodyFatPercentage >= 25) {
                $('#bfat-output-three').show();
            }
        } 
        else 
        {
            $('.bfatoutput1').text(`${bodyFatPercentage.toFixed(2)}%`);
            // Reset all categories
            const categories = ['#xathletic_inn', '#xgreen_inn', '#xsedentary_inn', '#xlight_inn', '#xmoderate_inn', '#xhigh_inn'];
            categories.forEach(category => $(category).removeClass('active').text(''));
    
            // Activate the appropriate category
            if (bodyFatPercentage < 2) {
                $('#xathletic_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 5) {
                $('#xgreen_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 13) {
                $('#xsedentary_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 17) {
                $('#xlight_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else if (bodyFatPercentage <= 24) {
                $('#xmoderate_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            } else {
                $('#xhigh_inn').text(`${bodyFatPercentage.toFixed(2)}%`).addClass('active');
            }
    
            $(".tlresult-bodyfat").show('slideDown');
            $('#bfat-output').show('slideDown');
            $(".tlresult").text(`Your body fat percentage is ${bodyFatPercentage.toFixed(2)}%.`);
            const resultsSection = document.querySelector(".tlresult-bodyfat");
            const headerOffset = 100; // Adjust this value to match your header's height
            const elementPosition = resultsSection.getBoundingClientRect().top + window.scrollY;
            const offsetPosition = elementPosition - headerOffset;
            
            window.scrollTo({
              top: offsetPosition,
              behavior: "smooth"
            });
    
            // Display specific results
            if (bodyFatPercentage < 21) {
                $('#bfat-output-one').show();
            } else if (bodyFatPercentage >= 21 && bodyFatPercentage < 25) {
                $('#bfat-output-two').show();
            } else if (bodyFatPercentage >= 25) {
                $('#bfat-output-three').show();
            }
        }//else closed
    }//else closed
    
    
  });

    //view more function
    $(".xviewmore1").click(function(){
      var text = $(".xviewmore1").text();
      $(".out-wraper").toggle('slow');
      if(text === 'Hide Legends')
      {
            $(".xviewmore1").text('Show Legends');
      }
      else
      {
        $(".xviewmore1").text('Hide Legends');
      }
      
    });
});
</script>

{% schema %}
  {
    "name": "TL_body_fat_calculator",
    "settings": [
	{
		"type":"image_picker",
		"id":"header_image",
		"label":"Choose image"
	},
	{
		"type":"text",
		"id":"title",
		"label":"Title"
	},
	{
		"type":"textarea",
		"id":"detail",
		"label":"Subtitle"
	},
	{
    	"type":"text",
        "id":"resources_heading",
        "label":"Resources heading"
	},
    {
        "type":"richtext",
        "id":"resources_detail",
        "label":"Resources details"
    },
    {
        "type":"text",
        "id":"references_heading",
        "label":"References heading"
     },
    {
    	"type":"richtext",
    	"id":"references_detail",
    	"label":"References details"
    },
    {
        "type":"url",
        "id":"page_url",
        "label":"Choose calculator page"
    },
    {
        "type":"text",
        "id":"heading",
        "label":"heading"
    },
    {
        "type":"richtext",
        "id":"resultdetail",
        "label":"Details on result page"
    }
],
"presets":[
		{
			"name": "TL_body_fat_calculator"
		}
	]
  }
{% endschema %}
