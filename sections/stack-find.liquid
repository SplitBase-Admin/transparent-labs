

<div class="xgen-stack-find">
  <div class="xgen-inner">
    
    <div class="stack-find-wraper">
      <div class="stack-find-top">
        {% if section.settings.heading %}
          <h2 class="heading">{{ section.settings.heading }}</h2>
        {% endif %}


        {% if section.settings.subheading %}
          <p class="subheading">{{ section.settings.subheading }}</p>
        {% endif %}

      </div>

      <div class="stack-find">
        
        <div class="accordion">
        <form id="email_signup" class="klaviyo_styling klaviyo_gdpr_embed_TQDt27" action="//manage.kmail-lists.com/subscriptions/subscribe" data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe" method="GET" target="_blank">
          <input type="hidden" name="g" value="TQDt27  ">
          <input type="hidden" name="$fields" value="$consent">
          <input type="hidden" name="$list_fields" value="$consent">
          
          <div class="input-wraper">
            <label for="goals">Goals</label>
            <select id="goals" name="goals">
              <option value="Bulking">Bulking</option>
              <option value="Cutting">Cutting</option>
              <option value="Body Recomposition">Body Recomposition</option>
              <option value="General Health and Wellness">General Health and Wellness</option>
            </select>
          </div>

          <div class="input-wraper">
            <label for="dietary">Dietary Restricions</label>
            <select id="dietary" name="dietary">
              <option value="None">None</option>
              <option value="Vegan">Vegan</option>
              <option value="Stimulant Free">Stimulant Free</option>
            </select>
          </div>
          <div class="input-wraper">
            <label for="height">Height</label>
            <div class="input-wraper2">
              <input class="form_ft" type="text" name="height" placeholder="ft"  required=""/>
            </div>
          </div>

          <div class="input-wraper">
            <label for="weight_num">Weight</label>
            <div class="input-wraper1">
              <input class="weight_num" type="text" name="weight_num" placeholder="73"  required=""/>
              <select id="weight" name="weight" class="min-select">
                <option value="kg">kg</option>
                <option value="lbs">lbs</option>
              </select>
            </div>
          </div>

          <div class="input-wraper">
            <label class="gender">Gender</label>
            <select id="gender" name="gender">
              <option class="Male">Male</option>
              <option class="Female">Female</option>
              <option class="Nonbinary">Nonbinary</option>
              <option class="Rather Not Say">Rather Not Say</option>
            </select>
          </div>
          
          <div class="input-wraper">
            <label>Email</label>
            <input id="email" name="email" type="text" placeholder="Your Email" required=""/>
          </div>

          <button type="submit" class="btn klaviyo_submit_button submit_form_btn">Find My Stacks</button>

        </form>
        </div>
        
        <div class="klaviyo_messages">
          <div class="success_message" style="display:none;"></div>
          <div class="error_message" style="display:none;"></div>
        </div>
        
      </div>
    </div>
  
  </div>
</div>

<style type="text/css">
  .klaviyo_styling.klaviyo_gdpr_embed_LIST_ID,
  .klaviyo_condensed_styling.klaviyo_gdpr_embed_LIST_ID {
    font-family: "Helvetica Neue", Arial;
  }

  .klaviyo_styling.klaviyo_gdpr_embed_LIST_ID .klaviyo_helptext,
  .klaviyo_condensed_styling.klaviyo_gdpr_embed_LIST_ID .klaviyo_helptext {
    font-family: "Helvetica Neue", Arial;
    padding-top: 10px;
    padding-bottom: 10px;
  }

  .klaviyo_styling.klaviyo_gdpr_embed_LIST_ID .klaviyo_gdpr_text,
  .klaviyo_condensed_styling.klaviyo_gdpr_embed_LIST_ID .klaviyo_gdpr_text {
    font-size: 14px;
    line-height: 1.3;
  }

  .klaviyo_styling.klaviyo_gdpr_embed_LIST_ID label,
  .klaviyo_condensed_styling.klaviyo_gdpr_embed_LIST_ID label {
    color: #222;
  }

  .klaviyo_styling .klaviyo_field_group .klaviyo_form_actions {
    text-align: left;
  }

  .klaviyo_styling.klaviyo_gdpr_embed_LIST_ID input[type=checkbox]+label,
  .klaviyo_condensed_styling.klaviyo_gdpr_embed_LIST_ID input[type=checkbox]+label {
    display: inline;
    font-weight: normal;
    padding-left: 5px;
  }

  .klaviyo_styling.klaviyo_gdpr_embed_LIST_ID input[type=text],
  .klaviyo_styling.klaviyo_gdpr_embed_LIST_ID input[type=email],
  .klaviyo_condensed_styling.klaviyo_gdpr_embed_LIST_ID input[type=text],
  .klaviyo_condensed_styling.klaviyo_gdpr_embed_LIST_ID input[type=email] {
    border-radius: 2px;
  }

  .klaviyo_styling.klaviyo_gdpr_embed_LIST_ID .klaviyo_submit_button,
  .klaviyo_condensed_styling.klaviyo_gdpr_embed_LIST_ID .klaviyo_submit_button {
    background-color: #0064cd;
    border-radius: 2px;
  }

  .klaviyo_styling.klaviyo_gdpr_embed_LIST_ID .klaviyo_submit_button:hover,
  .klaviyo_condensed_styling.klaviyo_gdpr_embed_LIST_ID .klaviyo_submit_button:hover {
    background-color: #0064cd;
  }
</style>
<script type="text/javascript" src="//www.klaviyo.com/media/js/public/klaviyo_subscribe.js"></script>
<script type="text/javascript">
  KlaviyoSubscribe.attachToForms('#email_signup', {
    success: function ($form) {
      console.log($form);
      after_submit();
 // `$form` is a jQuery wrapper around the form that was submitted. This makes it easy to get the email address or form fields.
   var email = $form.find('[name="email"]').val();
   _learnq.push(['identify', { $email: email }]);
   _learnq.push(['track', 'Signed Up for Newsletter']);
 },
    hide_form_on_success: true,
    extra_properties: {
      $source: '$embed',
      $method_type: "Klaviyo Form",
      $method_id: 'embed',
      $consent_version: 'Embed default text'
    }
  });
  
      function after_submit(){
      
      var goals = $("#goals").val();
        
      
      var dietary = $("#dietary").val();
      var form_ft = $(".form_ft").val();
      var form_inch = $(".form_inch").val();
      var weight = $("#weight").val();
      var gender = $("#gender").val();
	  var email = $("#email").val();
        
        
//         if(goals == '')
//         {
//           $('.error_message').show();
//           $('.error_message').text('');
//         }
        
//         if(dietary == ''){
//           	$('.error_message').show();
//         	$('.error_message').text('');
//         }
        
//         if(form_ft == ''){
//           	$('.error_message').show();
//         	$('.error_message').text('');
//         }
//         if(form_inch == ''){
//           	$('.error_message').show();
//         	$('.error_message').text('');
//         }
        
//         if(weight == ''){
//           	$('.error_message').show();
//         	$('.error_message').text('');
//         }
//         if(gender == ''){
//           	$('.error_message').show();
//         	$('.error_message').text('');
//         }
//         if(email == ''){
//           	$('.error_message').show();
//         	$('.error_message').text('');
//         }
        
        
      
      var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/; 
      var email_ex = regex.test(email);
      
      if(email_ex){
        $("#email").removeClass("error_email");
        $("#tablinks").removeClass("active");
        
        if(dietary == 'None' && goals == 'Bulking' ){
          $("#protab_2").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_2").click();
        }else if( dietary == 'None' && goals == 'Cutting' ){
          $("#protab_3").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_3").click();
        }else if( dietary == 'None' && goals == 'Body Recomposition' ){
          $("#protab_4").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_4").click();
        }else if( dietary == 'None' && goals == 'General Health and Wellness' ){
          $("#protab_7").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_7").click();
        }
      	
        if(dietary == 'Vegan' && goals == 'Bulking' ){
		  $("#tab_5 .xgen-new-product").hide();
          $(".vegan_class").show();
          $("#protab_5").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_5").click();
        }else if( dietary == 'Vegan' && goals == 'Cutting' ){
          $("#tab_5 .xgen-new-product").hide();
          $(".vegan_class").show();
          $("#protab_5").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_5").click();
        }else if( dietary == 'Vegan' && goals == 'Body Recomposition' ){
          $("#tab_5 .xgen-new-product").hide();
          $(".vegan_class").show();
          $("#protab_5").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_5").click();
        }else if( dietary == 'Vegan' && goals == 'General Health and Wellness' ){
          $("#tab_5 .xgen-new-product").hide();
          $(".vegan_class").show();
          $("#protab_5").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_5").click();
        }
        
        if(dietary == 'Stimulant Free' && goals == 'Bulking' ){
          $("#tab_6 .xgen-new-product").hide();
          $(".StimulantFree").show();
          $("#protab_6").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_6").click();
        }else if( dietary == 'Stimulant Free' && goals == 'Cutting' ){
          $("#tab_6 .xgen-new-product").hide();
          $(".StimulantFree").show();
          $("#protab_6").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_6").click();
        }else if( dietary == 'Stimulant Free' && goals == 'Body Recomposition' ){
          $("#tab_6 .xgen-new-product").hide();
          $(".StimulantFree").show();
          $("#protab_6").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_6").click();
        }else if( dietary == 'Stimulant Free' && goals == 'General Health and Wellness' ){
          $("#tab_6 .xgen-new-product").hide();
          $(".StimulantFree").show();
          $("#protab_6").addClass("active");
          $('html,body').animate({
            scrollTop: $('#xgen-new-collection').offset().top
          }, 1000);
          $("#protab_6").click();
        }

      } else {
        $("#email").addClass("error_email");
      }
     

      
    };
  
</script>


{% comment %}
<script>
  $(document).ready(function(){
    
  });
</script>
{% endcomment %}

{% schema %}
  {
    "name": "Stack Find",
    "settings": [
		{
        	"type":"text",
        	"id":"heading",
        	"label":"Heading"
        },
        {
        	"type":"textarea",
        	"id":"subheading",
        	"label":"Sub Heading"
        },
		{
        	"type":"text",
        	"id":"btn_text",
        	"label":"Button Text"
        },
        {
        	"type":"url",
        	"id":"btn_url",
        	"label":"Button URL"
        }
	],
	"blocks":[
		{
			"name":"Block",
			"type":"text",
			"settings":[
				
				{
                    "type":"text",
                    "id":"text1",
                    "label":"Small Text"
                },
                {
                    "type":"text",
                    "id":"text2",
                    "label":"Large Text"
                },
                {
                    "type":"textarea",
                    "id":"text3",
                    "label":"Text"
                }

			]
		}
	],
	"presets":[
		{
			"name": "Stack Find"
		}
	]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
