{% comment %}
  TD Tooltip Snippet
  
  A reusable tooltip component that can be used throughout the theme.
  
  Parameters:
  - trigger_text: Text to display as the trigger (optional)
  - trigger_icon: Show the info icon (default: true)
  - content: The tooltip content
  - trigger_class: Additional CSS class for the trigger text (optional)
  - icon_class: Additional CSS class for the icon (optional)
  - custom_trigger: Custom HTML for the trigger (optional, overrides trigger_text and trigger_icon)
  
  Usage:
  {% render 'sb-tooltip', 
    trigger_text: 'Learn More',
    content: 'Your tooltip content here' %}
  
  {% render 'sb-tooltip', 
    trigger_text: 'Learn More',
    content: tooltip_content,
    trigger_class: 'my-custom-class' %}
  
  {% render 'sb-tooltip', 
    custom_trigger: '<button>Custom Trigger</button>',
    content: 'Tooltip content' %}
{% endcomment %}

{% stylesheet %}
/* TD Tooltip Component Styles */
.sb-tooltip {
  position: relative;
  display: flex;
  gap: 6px;
  color: var(--sb-fg-color-lightened);
}

.sb-tooltip__trigger-text {
  /* Default styles for trigger text - can be overridden */
  color: inherit;
  text-decoration: underline;
  text-decoration-skip-ink: none;
  text-underline-position: from-font;
  cursor: pointer;
  color: var(--sb-fg-color-lightened);
}

.sb-tooltip__trigger-icon {
  /* Default styles for trigger icon - can be overridden */
  width: 20px;
  height: 20px;
  stroke-width: 1.25px;
  cursor: pointer;
}

.sb-tooltip__content {
  display: none;
}

.sb-tooltip__popup {
  position: absolute;
  top: calc(100% + 10px);
  z-index: 1000;
  background: var(--sb-tooltip-bg-color);
  border-radius: 8px;
  padding: 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  opacity: 0;
  visibility: hidden;
  transform: translateY(-4px);
  transition: all 0.2s ease;
  max-width: 400px;
  min-width: 280px;
  font-family: var(--sb-font-family-body);
}

.sb-tooltip__popup--visible {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.sb-tooltip__popup-content * {
  color: var(--sb-tooltip-text-color);
  letter-spacing: 0;
  line-height: 1.2;
}
.sb-tooltip__popup-content h1:not(:first-child),
.sb-tooltip__popup-content h2:not(:first-child),
.sb-tooltip__popup-content h3:not(:first-child),
.sb-tooltip__popup-content h4:not(:first-child),
.sb-tooltip__popup-content h5:not(:first-child),
.sb-tooltip__popup-content h6:not(:first-child) {
  margin-top: 24px;
}

.sb-tooltip__popup-content h1:first-child,
.sb-tooltip__popup-content h2:first-child,
.sb-tooltip__popup-content h3:first-child,
.sb-tooltip__popup-content h4:first-child,
.sb-tooltip__popup-content h5:first-child,
.sb-tooltip__popup-content h6:first-child {
  margin-top: 0;
}

.sb-tooltip__close {
  position: absolute;
  top: 16px;
  right: 16px;
  width: 24px;
  height: 24px;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  transition: background-color 0.2s ease;
}
@media screen and (min-width: 1024px){
  .sb-tooltip__close{
    display: none;
  }
}

.sb-tooltip__close:hover {
  background: rgba(255, 255, 255, 0.1);
}

.sb-tooltip__close-icon {
  width: 16px;
  height: 16px;
  stroke: var(--sb-tooltip-text-color);
  stroke-width: 2px;
}

.sb-tooltip-arrow {
  position: absolute;
  left: 90px;
  background: var(--sb-tooltip-bg-color);
  width: 14px;
  height: 14px;
  transform: rotate(45deg);
  top: -7px;
}

.sb-tooltip__section {
  margin-bottom: 20px;
}

.sb-tooltip__section:last-child {
  margin-bottom: 0;
}

.sb-tooltip__section-title {
  font-family: var(--sb-font-family-body);
  font-weight: 600;
  font-size: 16px;
  line-height: 1.3;
  color: var(--sb-tooltip-text-color);
  margin: 0 0 8px 0;
}

.sb-tooltip__section-description {
  font-family: var(--sb-font-family-body);
  font-weight: 400;
  font-size: 14px;
  line-height: 1.4;
  color: var(--sb-tooltip-text-color);
  opacity: 0.8;
  margin: 0;
}

@media (max-width: 768px) {
  .sb-tooltip__popup {
    max-width: 280px;
    min-width: 240px;
    padding: 16px;
  }
  
  .sb-tooltip__close {
    top: 12px;
    right: 12px;
  }
  
  .sb-tooltip__section {
    margin-bottom: 16px;
  }
  
  .sb-tooltip-arrow {
    left: 60px;
  }
}
{% endstylesheet %}

{%- liquid
  assign show_icon = trigger_icon | default: true
  assign trigger_text = trigger_text | default: ''
  assign content = content | default: ''
  assign trigger_class = trigger_class | default: ''
  assign icon_class = icon_class | default: ''
-%}

<sb-tooltip class="sb-tooltip">
  {% if custom_trigger %}
    {{ custom_trigger }}
  {% else %}
    {% if trigger_text != blank %}
      <span class="sb-tooltip__trigger-text {{ trigger_class }}">{{ trigger_text }}</span>
    {% endif %}
    
    {% if show_icon %}
      <svg class="sb-tooltip__trigger-icon {{ icon_class }}" fill="none" viewBox="0 0 20 20">
        <path d="M10 6.66667H10.0067M10 13.3333V9.16667M18.3333 10C18.3333 14.6025 14.6025 18.3333 10 18.3333C5.3975 18.3333 1.66667 14.6025 1.66667 10C1.66667 5.3975 5.3975 1.66667 10 1.66667C14.6025 1.66667 18.3333 5.3975 18.3333 10Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"/>
      </svg>
    {% endif %}
  {% endif %}
  
  <div class="sb-tooltip__content">
    <div class="sb-tooltip-arrow">&nbsp;</div>
    <button class="sb-tooltip__close" aria-label="Close tooltip">
      <svg class="sb-tooltip__close-icon" fill="none" viewBox="0 0 24 24">
        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <div class="sb-tooltip__popup-content">
      {{ content }}
    </div>
  </div>
</sb-tooltip> 