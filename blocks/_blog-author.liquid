
  {% stylesheet %}
    .sb-blog-author__wrapper {
      background-color: var(--sb-bg-color, transparent);
      color: var(--sb-fg-color, inherit);
      padding: var(--sb-padding-top-mobile, 0) 16px var(--sb-padding-bottom-mobile, 0);
    }

    .sb-blog-author__container {
      background: var(--sb-ch-bg-color, var(--sb-bg-color, #f9f9f9));
      padding: 24px 16px;
      border-radius: 6px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 24px;
      max-width: 100%;
    }

    .sb-blog-author__image {
      flex-shrink: 0;
    }

    .sb-blog-author__image img {
      width: 88px;
      height: 88px;
      border-radius: 50%;
      object-fit: cover;
      display: block;
    }

    .sb-blog-author__content {
      flex: 1;
      min-width: 0;
    }

    /* Hide container when content has no visible child elements */
    .sb-blog-author__container:not(:has(.sb-blog-author__name, .sb-blog-author__details, .sb-blog-author__link)) {
      display: none;
    }

    .sb-blog-author__name {
      margin: 0 0 20px 0;
      color: var(--sb-fg-color, rgb(var(--color-foreground)));
      font-size: 22px;
      font-style: normal;
      font-weight: 600;
      line-height: 120%;
    }

    .sb-blog-author__details {
      letter-spacing: 0.06rem;
      color: var(--sb-fg-color, rgb(var(--color-foreground)));
      opacity: 0.8;
      margin: 0 0 20px 0;
    }

    .sb-blog-author__details > * > * {
      font-size: 16px;
      font-style: normal;
      font-weight: 400;
      line-height: 140%;
      color: var(--sb-fg-color-lightened, var(--sb-fg-color, #000));
      margin: 0;
    }

    .sb-blog-author__link {
      font-size: 16px;
      font-weight: 500;
      line-height: 1; 
      color: var(--sb-fg-color, #000);
      display: flex;
      gap: 10px;
      align-items: center;
      border-bottom:  1px solid var(--sb-ch-fg-color, var(--sb-fg-color, #000));
      width: fit-content;
      text-decoration: none;
    }

    .sb-blog-author__link:hover {
      opacity: 0.7;
    }

    .sb-blog-author__arrow {
      flex-shrink: 0;
      transition: transform 0.2s ease;
    }

    .sb-blog-author__link:hover .sb-blog-author__arrow {
      transform: translateX(2px);
    }

    /* Desktop styles */
    @media (min-width: 990px) {
      .sb-blog-author__name {
        font-size: 28px;
      }

      .sb-blog-author__wrapper {
        padding: var(--sb-padding-top, 0) 0 var(--sb-padding-bottom, 0);
      }

      .sb-blog-author__container {
        flex-direction: row;
        align-items: flex-start;
        padding: 32px;
      }
    }
  {% endstylesheet %}

{%  liquid
  assign author_details = article.metafields.custom.author_details.value
  unless block.settings.use_author_details
    assign author_details = block.settings.source
  endunless
%}
{% if author_details != blank %}
  <div class="sb-blog-author__wrapper sb-styled-element" id="blog-author"
       style="{% render 'style-attributes', settings: block.settings %}">
    <div class="sb-blog-author__container">
      {% if author_details.author_profile_image != blank %}
        <div class="sb-blog-author__image">
          {{ author_details.author_profile_image | image_url: width: 120, height: 120 | image_tag: loading: 'lazy' }}
        </div>
      {% endif %}
      <div class="sb-blog-author__content">
        {% if author_details.author_name != blank %}
          <h3 class="sb-blog-author__name">About {{ author_details.author_name }}</h3>
        {% endif %}
        {% if author_details.author_information != blank %}
          <div class="sb-blog-author__details">{{ author_details.author_information | metafield_tag }}</div>
        {% endif %}
        {% if author_details.author_articles_url != blank and block.settings.link_text != blank %}
          <a href="{{ author_details.author_articles_url }}" class="sb-blog-author__link">
            <span>{{ block.settings.link_text }}</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
              <path d="M-1.74846e-07 9L16 9M16 9L11.75 13M16 9L11.75 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        {% endif %}
      </div>
    </div>
  </div>
{% endif %}


{% schema %}
{
  "name": "Author Details",
  "tag": null,
  "settings": [
    {
      "type": "checkbox",
      "id": "use_author_details",
      "label": "Use Author Details",
      "default": true,
      "info": "Enable this to show author details metafield of article"
    },
    {
      "type":"metaobject",
      "id":"source",
      "label":"Default Author Details",
      "metaobject_type":"article_page_author_details",
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link Text",
      "default": "View All Articles"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Top Padding",
      "default": 32
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 32
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "fg_color",
      "label": "Color"
    },
    {
      "type": "color_background",
      "id": "bg_color",
      "label": "Background Color"
    },
    {
      "type": "color_background",
      "id": "ch_bg_color",
      "label": "Inner Background Color"
    }
  ],
  "presets": [
    {
      "name": "SB - Author Details"
    }
  ]
}
{% endschema %}
